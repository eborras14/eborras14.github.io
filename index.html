<!DOCTYPE html>
<html lang="ES">
<head>
  <title>MyApp PWA</title>
  <meta charset="utf-8">
  <link rel="manifest" href="/manifest.json"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles/styles.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script>
    $(document).ready(function(){
    //Funcion que comprueba si hay conexion a internet si la hay muestra contenido de internet sino muestra contenido de cache si esque hay
    status = navigator.onLine;
      if(status=="true"){
          for(i=0;i<div.length;i++){
            seccion=div[i];
            var muestraNoticia = localStorage.getItem(seccion);
            if(muestraNoticia != null && muestraNoticia.length != 0){
                document.getElementById(i).disabled = true;
                muestraHTML(seccion, muestraNoticia);
            }
        }
        }else if(status=="false"){
        welcome("Sin conexion");
         $(".enabledDisabled").hide();
          $(".subscription-details").hide();

         for(i=0;i<div.length;i++){
            seccion=div[i];
            var muestraNoticia = localStorage.getItem(seccion);
            if(muestraNoticia!=null){
                document.getElementById(i).disabled = true;
                muestraHTML(seccion, muestraNoticia);
            }
        }              
      }
//Popover de cada seccion-----------------------------
    $('[data-toggle="popover"]').popover();  
//---------------Facebook ---------------------------
(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = "https://connect.facebook.net/es_ES/sdk.js#xfbml=1&version=v2.8&appId=351755105201498";
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
//TWITTER --------------------------------------
    window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };
  return t;
}(document, "script", "twitter-wjs"));
});
 
  </script>
</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="index.html">MyApp PWA</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li><a href="index.html">Inicio</a></li>
        <li><a href="sucesos.html">Sucesos</a></li>
        <li><a href="internacional.html">Internacional</a></li>
        <li><a href="politica.html">Politica</a></li>
        <li><a href="deportes.html">Deportes</a></li>
        <li><a href="favoritas.html">Mis noticias</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#"><span class="glyphicon glyphicon-cog" data-toggle="modal" data-target="#myModal"> Configuraci贸n</span></a></li>
      </ul>
    </div>
  </div>
</nav>
<div class="container-fluid bg-3"> 
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Pantalla de configuraci贸n...</h4>
        </div>
        <div class="modal-body">
            <button  id="0" onclick="descargaArchivo(0,'http://www.lavanguardia.com/mvc/feed/rss/sucesos',2);" type="button" class="btn btn-block" ><div class="right"><a href="#" onclick="gestionaNoticias('Sucesos',1);"><img src="images/refresh.png" width="15px"/></a></div><div class="right"><a href="#" onclick="gestionaNoticias('Sucesos',2);"><img src="images/remove.png" width="15px"/></a></div> Sucesos</button>
            <button id="1" onclick="descargaArchivo(1,'http://www.lavanguardia.com/mvc/feed/rss/internacional',2);" type="button" class="btn  btn-block"><div class="right"><a href="#" onclick="gestionaNoticias('Internacional',1);"><img src="images/refresh.png" width="15px"/></a></div><div class="right"><a href="#" onclick="gestionaNoticias('Internacional',2);"><img src="images/remove.png" width="15px"/></a></div>Internacional</button>
            <button id="2" onclick="descargaArchivo(2,'http://www.lavanguardia.com/mvc/feed/rss/politica',2);" type="button" class="btn  btn-block"><div class="right"><a href="#" onclick="gestionaNoticias('Politica',1);"><img src="images/refresh.png" width="15px"/></a></div><div class="right"><a href="#" onclick="gestionaNoticias('Politica',2);"><img src="images/remove.png" width="15px"/></a></div>Politica</button>
            <button id="3" onclick="descargaArchivo(3,'http://www.lavanguardia.com/mvc/feed/rss/economia',2);" type="button" class="btn  btn-block"><div class="right"><a href="#" onclick="gestionaNoticias('Economia',1);"><img src="images/refresh.png" width="15px"/></a></div><div class="right"><a href="#" onclick="gestionaNoticias('Economia',2);"><img src="images/remove.png" width="15px"/></a></div>Economia</button>
            <button id="4" onclick="descargaArchivo(4,'http://www.lavanguardia.com/mvc/feed/rss/deportes',2);" type="button" class="btn  btn-block"><div class="right"><a href="#" onclick="gestionaNoticias('Deportes',1);"><img src="images/refresh.png" width="15px"/></a></div><div class="right"><a href="#" onclick="gestionaNoticias('Deportes',2);"><img src="images/remove.png" width="15px"/></a></div>Deportes</button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
        <div name="Sucesos" id="Sucesos">
        </div>
        <div name="Internacional" id="Internacional">
        </div>
        <div name="Politica" id="Politica">
        </div>
        <div name="Economia" id="Economia">
        </div>
        <div name="Deportes" id="Deportes">
        </div>
    </div>
  </div>
<!------------POP Notificacions------------------------>
<div class="modal fade" id="myModal2" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Activar notificaciones  push</h4>
        </div>
        <div class="modal-body">
           <main>
            <section class="subscription-details js-subscription-details is-invisible">
                <p>Simulaci贸n de servidor de envio de notificaciones push:<a href="https://web-push-codelab.appspot.com/" target="_blank"> Push Companion
                Site</a></p>
                <pre><code class="js-subscription-json"></code></pre>
            </section>
            </main>
            <span class="enabledDisabled">
            <center>
                Subcripci贸n notificaciones:
                <button disabled class="js-push-btn mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">Activar</button>
            </center>
            </span>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
<a href="#" class="scrollup">Scroll</a>
</div><br>
<footer class="container-fluid text-center">
    <center><a class="linked" href="#"><span class="glyphicon glyphicon-send" data-toggle="modal" data-target="#myModal2"></span></a></center>
</footer>
<script src="scripts/ajax_peticion.js"></script>
<script src="scripts/scroll.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>